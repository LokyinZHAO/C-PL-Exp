//用更相减损求最大公约数
#include<stdio.h>
#include<stdlib.h>

int main(void)
{
	int m, n, k, p, i, d;
	printf("Input m,n\n	");
	scanf_s("%d%d", &m, &n);

	//**********************************************************************************************
	//Step1 使得m为较大值 n为较小值
	if (m<n)																			//交换m和n，使得m为较大值
	{
		//原代码：
		//int t;
		//t = m;
		//m = n;
		//n = t;
		m = m ^ n;
		n = n ^ m;
		m = m ^ n;

	}
	//***********************************************************************************************

	//***********************************************************************************************
	//Step2 若mn都为偶数 将mn同时除以2 约至不同为偶数 记约分次数为k
	k = 0;
	//原代码：
	//while (m%2==0&&n%2==0)												//m和n均为偶数
	while (!((m&0x00000001)|(n&0x00000001)))
	{
		//原代码：
		//m /= 2;																			//用2约简m
		//n /= 2;																			//用2约简n
		m=m >> 1;
		n=n >> 1;
		k++;
	}																						//m和n都为偶数时则同时除以2，直至mn不同为偶数
	//***********************************************************************************************

	//***********************************************************************************************
	//Step3 求p=2的k次方
	//原代码：
	//for ( p=1,i=0; i < k; i++)													//求p=2的k次方
	//{
	//	p *= 2;
	//}
	p = 1;
	p = p << k;

	//***********************************************************************************************

	//***********************************************************************************************
	//Step4 进行辗转相减 即大数m减小数n 所得的差d与小数n比较 较大值赋给m 较小值赋给n 如此重复操作 直至差与小数相等 即d=n
	while ((d=m-n)!=n)
	{
		if (d > n) m = d;
		else
		{
			//原代码
			//m = n;
			//n = d;
			m = n, n = d;
		}
	}
	//***********************************************************************************************

	//***********************************************************************************************
	//Step5 将所得的d与之前求得的p相乘 得到mn的最大公约数d
	d *= p;
	printf("greatest common divisor : %d", d);
	//***********************************************************************************************


	system("pause");
	return 0;
}

